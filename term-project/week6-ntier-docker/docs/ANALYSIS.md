# üìä ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö: VM vs Docker Deployment
## ENGSE207 - Week 6 N-Tier Architecture

**‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:** ‡∏†‡∏≤‡∏ô‡∏∏‡∏ß‡∏±‡∏í‡∏ô‡πå ‡∏ï‡πã‡∏≤‡∏Ñ‡∏≥
**‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤:** 67543210044-3  
**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 12 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2569

---

## 1. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Setup Process

| ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô | Version 1 (VM) | Version 2 (Docker) |
|---------|----------------|-------------------|
| ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á PostgreSQL | `sudo apt install postgresql` | `image: postgres:16-alpine` (Auto) |
| ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Node.js | `curl ... | sudo bash -` ‡πÅ‡∏•‡∏∞ `apt install nodejs` | `build: ./api` (Dockerfile) |
| ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Nginx | `sudo apt install nginx` | `image: nginx:alpine` (Auto) |
| Configure Database | ‡∏™‡∏£‡πâ‡∏≤‡∏á User/DB ‡∏ú‡πà‡∏≤‡∏ô `psql` CLI | ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ú‡πà‡∏≤‡∏ô `environment` variables |
| Configure SSL | ‡∏™‡∏£‡πâ‡∏≤‡∏á cert ‡∏î‡πâ‡∏ß‡∏¢ `openssl` ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ config nginx | ‡∏£‡∏±‡∏ô script `./scripts/generate-ssl.sh` |
| Start Services | `systemctl start postgresql/nginx/node` | `docker compose up -d` |
| **‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** | ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 30-60 ‡∏ô‡∏≤‡∏ó‡∏µ | ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 5-10 ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏ô‡πá‡∏ï) |

---

## 2. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Resource Usage

| Resource | Version 1 (VM) | Version 2 (Docker) |
|----------|----------------|-------------------|
| Memory Usage | ‡∏™‡∏π‡∏á (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô OS kernel ‡πÅ‡∏¢‡∏Å) | ‡∏ï‡πà‡∏≥ (‡πÅ‡∏ä‡∏£‡πå OS kernel ‡∏Å‡∏±‡∏ö host) |
| Disk Usage | ‡∏™‡∏π‡∏á (‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á OS ‡πÅ‡∏•‡∏∞ libraries ‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô) | ‡∏ï‡πà‡∏≥ (‡πÉ‡∏ä‡πâ Layer caching ‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå base image) |
| CPU Usage | ‡∏°‡∏µ Overhead ‡∏Ç‡∏≠‡∏á Guest OS | ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á Pass-through (Native) |
| Startup Time | ‡∏ä‡πâ‡∏≤ (Boot OS + Start Services) | ‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å (Start Process) |

---

## 3. ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á Docker Deployment (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô 5 ‡∏Ç‡πâ‡∏≠)

1. **Isolation (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏î‡∏î‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß):** ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Service ‡πÅ‡∏¢‡∏Å environment ‡∏Å‡∏±‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ dependency ‡∏ï‡∏µ‡∏Å‡∏±‡∏ô (Dependency Hell) ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô

2. **Portability (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢):** "Build once, run anywhere" ‡∏£‡∏±‡∏ô‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Dev, Test, Prod ‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡πà

3. **Rapid Deployment (‡∏Å‡∏≤‡∏£‡∏î‡∏µ‡∏û‡∏•‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß):** ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ Setup ‡∏ô‡πâ‡∏≠‡∏¢‡∏°‡∏≤‡∏Å ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß `docker compose up` ‡∏Å‡πá‡πÑ‡∏î‡πâ Environment ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

4. **Efficiency (‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û):** ‡πÉ‡∏ä‡πâ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ VM ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á Hardware ‡πÅ‡∏•‡∏∞ OS ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

5. **Version Control (‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô):** Infrastructure as Code (IaC) ‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå `Dockerfile` ‡πÅ‡∏•‡∏∞ `docker-compose.yml` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢

---

## 4. ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ç‡∏≠‡∏á Docker Deployment (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô 3 ‡∏Ç‡πâ‡∏≠)

1. **Learning Curve (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ):** ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏®‡∏∂‡∏Å‡∏©‡∏≤ Concept ‡πÉ‡∏´‡∏°‡πà‡πÜ ‡πÄ‡∏ä‡πà‡∏ô Container, Image, Volume, Network ‡∏ã‡∏∂‡πà‡∏á‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏õ‡∏Å‡∏ï‡∏¥

2. **Data Persistence (‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏≤‡∏ß‡∏£):** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Container ‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö Container ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Volume (Persistent Storage) ‡πÉ‡∏´‡πâ‡∏î‡∏µ

3. **Complexity needed for simple apps:** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Application ‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏´‡∏£‡∏∑‡∏≠ Static web ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Docker ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏î‡∏π‡∏¢‡∏∏‡πà‡∏á‡∏¢‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ö‡∏ô Web Server ‡∏õ‡∏Å‡∏ï‡∏¥

---

## 5. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ VM vs Docker?

### ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ VM ‡πÄ‡∏°‡∏∑‡πà‡∏≠:
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å Kernel ‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î (Strong Isolation)
- Application ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö Monolith ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ Container ‡∏¢‡∏≤‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ OS ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏≤‡∏á
- ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Hardware ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á‡∏ó‡∏µ‡πà Docker ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏¢‡∏≤‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Driver ‡πÑ‡∏î‡πâ‡∏•‡∏≥‡∏ö‡∏≤‡∏Å

### ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ Docker ‡πÄ‡∏°‡∏∑‡πà‡∏≠:
- ‡∏û‡∏±‡∏í‡∏ô‡∏≤ Application ‡πÅ‡∏ö‡∏ö Microservices Architecture
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ CI/CD Pipeline ‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡πÅ‡∏•‡∏∞ State ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Dev/Test/Prod
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£ Server ‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ High Density (‡∏£‡∏±‡∏ô‡∏´‡∏•‡∏≤‡∏¢ App ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)

---

## 6. ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å Lab ‡∏ô‡∏µ‡πâ

‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ Lab ‡∏ô‡∏µ‡πâ ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Architecture ‡∏à‡∏≤‡∏Å Monolith ‡πÄ‡∏î‡∏¥‡∏° ‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô N-Tier Architecture ‡∏ö‡∏ô Docker ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Docker Compose ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏≤‡∏¢ Service (API, Database, Nginx) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô ‡πÑ‡∏î‡πâ‡∏ù‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Dockerfile ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Node.js ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£ Config Nginx ‡πÄ‡∏õ‡πá‡∏ô Reverse Proxy ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Environment Variables ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢ Deployment ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å

---

## 7. ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Docker ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢ (Quick Reference)

```bash
# General Commands
docker ps                   # ‡∏î‡∏π container ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà
docker ps -a                # ‡∏î‡∏π container ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏´‡∏¢‡∏∏‡∏î‡∏î‡πâ‡∏ß‡∏¢)
docker images               # ‡∏î‡∏π image ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
docker volume ls            # ‡∏î‡∏π volume ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
docker network ls           # ‡∏î‡∏π network ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

# Docker Compose Commands
docker compose up -d        # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏° services ‡πÉ‡∏ô background
docker compose down         # ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏ö services, networks
docker compose start        # ‡πÄ‡∏£‡∏¥‡πà‡∏° services ‡∏ó‡∏µ‡πà‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏ß‡πâ
docker compose stop         # ‡∏´‡∏¢‡∏∏‡∏î services
docker compose restart      # ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó services

# Logs & Debugging
docker compose logs -f [service]  # ‡∏î‡∏π log ‡πÅ‡∏ö‡∏ö realtime (‡πÄ‡∏ä‡πà‡∏ô docker compose logs -f api)
docker compose exec [service] sh  # ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏£‡∏±‡∏ô shell ‡πÉ‡∏ô container (‡πÄ‡∏ä‡πà‡∏ô docker compose exec db bash)
docker system df            # ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà disk ‡∏Ç‡∏≠‡∏á docker
docker system prune -a      # ‡∏•‡∏ö image/container/network ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```